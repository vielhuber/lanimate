(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));

var lanimate = /*#__PURE__*/function () {
  function lanimate() {
    var _this = this;

    (0, _classCallCheck2.default)(this, lanimate);
    document.addEventListener('DOMContentLoaded', function () {
      _this.ready();
    });
    window.addEventListener('load', function () {
      _this.load();
    });
  }

  (0, _createClass2.default)(lanimate, [{
    key: "ready",
    value: function ready() {
      document.head.insertAdjacentHTML('beforeend', "\n            <style>\n                [data-lanimate] {\n                    opacity: 0;\n                }\n                /* disable on mobile */\n                @media screen and (max-width: 1100px) {\n                    [data-lanimate] {\n                        transition: all 0s ease 0s;\n                        opacity: 1;\n                    }\n                    [data-lanimate='scrollX'] {\n                        transform: translateX(0px);\n                    }\n                    [data-lanimate='scrollY'] {\n                        transform: translateX(0px);\n                    }\n                    [data-lanimate='scale'] {\n                        transform: scale(1) translateY(0px);\n                    }\n                    [data-lanimate='rotate'] {\n                        transform: rotate(0deg);\n                    }\n                }\n            </style>\n            ");
    }
  }, {
    key: "traverseAllTextNodes",
    value: function traverseAllTextNodes($el, $fn) {
      var _this2 = this;

      if ($el.childNodes.length > 0) {
        $el.childNodes.forEach(function ($el2) {
          if ($el2.nodeType === 3) {
            $el2.textContent = $fn($el2.textContent);
          } else {
            _this2.traverseAllTextNodes($el2, $fn);
          }
        });
      }
    }
  }, {
    key: "load",
    value: function load() {
      var _this3 = this;

      if (document.querySelectorAll('[data-lanimate-split]').length > 0) {
        document.querySelectorAll('[data-lanimate-split]').forEach(function ($el) {
          $el.setAttribute('data-aria-label', $el.innerText.replace(/(?:\r\n|\r|\n)/g, ' '));
          $el.innerHTML = $el.innerHTML.split(' ').join('&nbsp;');
          var shift = 0;

          if ($el.getAttribute('data-lanimate-split') === 'char') {
            _this3.traverseAllTextNodes($el, function ($text) {
              return '%span%' + $text.split('').join('%/span%%span%') + '%/span%';
            });

            $el.innerHTML = $el.innerHTML.split('%span%').join('<span>').split('%/span%').join('</span>');
            shift = 100;
          }

          if ($el.getAttribute('data-lanimate-split') === 'word') {
            _this3.traverseAllTextNodes($el, function ($text) {
              return '%span%' + $text.split(' ').join('%/span% %span%') + '%/span%';
            });

            $el.innerHTML = $el.innerHTML.split('%span%').join('<span>').split('%/span%').join('</span>');
            shift = 250;
          }

          if ($el.getAttribute('data-lanimate-split') === 'line') {
            $el.innerHTML = '<span>' + $el.innerHTML.split('<br>').join('</span><br/><span>') + '</span>';
            shift = 500;
          }

          var index = 0;
          $el.querySelectorAll('span').forEach(function ($el2, i) {
            if ($el2.innerText.trim() == '') {
              return;
            }

            $el2.setAttribute('data-lanimate', $el.getAttribute('data-lanimate'));
            var delay = 0;

            if ($el.hasAttribute('data-lanimate-delay')) {
              delay = parseInt($el.getAttribute('data-lanimate-delay'));
            }

            if ($el.hasAttribute('data-lanimate-speed')) {
              $el2.setAttribute('data-lanimate-speed', $el.getAttribute('data-lanimate-speed'));
              delay *= 1 / parseInt($el.getAttribute('data-lanimate-speed'));
            }

            $el2.setAttribute('data-lanimate-delay', delay + shift * index);
            index++;
          });
          $el.removeAttribute('data-lanimate');
          $el.removeAttribute('data-lanimate-delay');
          $el.removeAttribute('data-lanimate-speed');
        });
      }

      if (document.querySelectorAll('[data-lanimate-speed]').length > 0) {
        document.querySelectorAll('[data-lanimate-speed]').forEach(function ($el) {
          var speed = parseInt($el.getAttribute('data-lanimate-speed')) / 1000;
          setTimeout(function () {
            $el.style.transitionDuration = speed + 's, ' + speed + 's';
          }, 10);
        });
      }

      if (document.querySelectorAll('[data-lanimate]').length > 0) {
        document.querySelectorAll('[data-lanimate]').forEach(function ($el) {
          _this3.start($el);

          window.addEventListener('scroll', function () {
            _this3.start($el);
          });
        });
      }

      document.head.insertAdjacentHTML('beforeend', "\n            <style>\n                [data-lanimate='fade'] {\n                }\n                [data-lanimate='scrollX'] {\n                    transform: translateX(30px);\n                }\n                [data-lanimate='scrollY'] {\n                    transform: translateY(30px);\n                }\n                [data-lanimate='scale'] {\n                    transform: scale(1.1) translateY(30px);\n                }\n                [data-lanimate='rotate'] {\n                    transform: rotate(15deg);\n                    transform-origin: 0 0;\n                }\n                [data-lanimate-started] {\n                    transition: opacity 1s ease-in-out, transform 1s ease-in-out;\n                    opacity: 1;\n                }\n                [data-lanimate-split] span {\n                    display:inline-block;\n                }\n                [data-lanimate='fade'][data-lanimate-started] {\n                }\n                [data-lanimate='scrollX'][data-lanimate-started] {\n                    transform: translateX(0px);\n                }\n                [data-lanimate='scrollY'][data-lanimate-started] {\n                    transform: translateX(0px);\n                }\n                [data-lanimate='scale'][data-lanimate-started] {\n                    transform: scale(1) translateY(0px);\n                }\n                [data-lanimate='rotate'][data-lanimate-started] {\n                    transform: rotate(0deg);\n                }\n            </style>\n            ");
    }
  }, {
    key: "start",
    value: function start($el) {
      if (!$el.hasAttribute('data-lanimate-started') && this.scrollTop() + window.innerHeight >= this.offsetTop($el)) {
        var delay = 0;

        if ($el.hasAttribute('data-lanimate-delay')) {
          delay = parseInt($el.getAttribute('data-lanimate-delay'));
        }

        setTimeout(function () {
          $el.setAttribute('data-lanimate-started', 'true');
        }, delay);
      }
    }
  }, {
    key: "scrollTop",
    value: function scrollTop() {
      var doc = document.documentElement;
      return (window.pageYOffset || doc.scrollTop) - (doc.clientTop || 0);
    }
  }, {
    key: "offsetTop",
    value: function offsetTop($el) {
      return $el.getBoundingClientRect().top + window.pageYOffset - document.documentElement.clientTop;
    }
  }]);
  return lanimate;
}();

exports.default = lanimate;
window.lanimate = lanimate;

},{"@babel/runtime/helpers/classCallCheck":2,"@babel/runtime/helpers/createClass":3,"@babel/runtime/helpers/interopRequireDefault":4}],2:[function(require,module,exports){
function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

module.exports = _classCallCheck, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],3:[function(require,module,exports){
function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, descriptor.key, descriptor);
  }
}

function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}

module.exports = _createClass, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}],4:[function(require,module,exports){
function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

module.exports = _interopRequireDefault, module.exports.__esModule = true, module.exports["default"] = module.exports;
},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJfanMvc2NyaXB0LmpzIiwibm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9jcmVhdGVDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7SUNBcUIsUTtBQUNqQixzQkFBYztBQUFBOztBQUFBO0FBQ1YsSUFBQSxRQUFRLENBQUMsZ0JBQVQsQ0FBMEIsa0JBQTFCLEVBQThDLFlBQU07QUFDaEQsTUFBQSxLQUFJLENBQUMsS0FBTDtBQUNILEtBRkQ7QUFHQSxJQUFBLE1BQU0sQ0FBQyxnQkFBUCxDQUF3QixNQUF4QixFQUFnQyxZQUFNO0FBQ2xDLE1BQUEsS0FBSSxDQUFDLElBQUw7QUFDSCxLQUZEO0FBR0g7Ozs7V0FDRCxpQkFBUTtBQUNKLE1BQUEsUUFBUSxDQUFDLElBQVQsQ0FBYyxrQkFBZCxDQUNJLFdBREo7QUE2Qkg7OztXQUNELDhCQUFxQixHQUFyQixFQUEwQixHQUExQixFQUErQjtBQUFBOztBQUMzQixVQUFJLEdBQUcsQ0FBQyxVQUFKLENBQWUsTUFBZixHQUF3QixDQUE1QixFQUErQjtBQUMzQixRQUFBLEdBQUcsQ0FBQyxVQUFKLENBQWUsT0FBZixDQUF1QixVQUFBLElBQUksRUFBSTtBQUMzQixjQUFJLElBQUksQ0FBQyxRQUFMLEtBQWtCLENBQXRCLEVBQXlCO0FBQ3JCLFlBQUEsSUFBSSxDQUFDLFdBQUwsR0FBbUIsR0FBRyxDQUFDLElBQUksQ0FBQyxXQUFOLENBQXRCO0FBQ0gsV0FGRCxNQUVPO0FBQ0gsWUFBQSxNQUFJLENBQUMsb0JBQUwsQ0FBMEIsSUFBMUIsRUFBZ0MsR0FBaEM7QUFDSDtB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Q0g7Ozs7OztBQUdMLE1BQU0sQ0FBQyxRQUFQLEdBQWtCLFFBQWxCOzs7QUNwTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBsYW5pbWF0ZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlYWR5KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubG9hZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcmVhZHkoKSB7XG4gICAgICAgIGRvY3VtZW50LmhlYWQuaW5zZXJ0QWRqYWNlbnRIVE1MKFxuICAgICAgICAgICAgJ2JlZm9yZWVuZCcsXG4gICAgICAgICAgICBgXG4gICAgICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGVdIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLyogZGlzYWJsZSBvbiBtb2JpbGUgKi9cbiAgICAgICAgICAgICAgICBAbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiAxMTAwcHgpIHtcbiAgICAgICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGVdIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwcyBlYXNlIDBzO1xuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBbZGF0YS1sYW5pbWF0ZT0nc2Nyb2xsWCddIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgwcHgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFtkYXRhLWxhbmltYXRlPSdzY3JvbGxZJ10ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDBweCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGU9J3NjYWxlJ10ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxKSB0cmFuc2xhdGVZKDBweCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGU9J3JvdGF0ZSddIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPC9zdHlsZT5cbiAgICAgICAgICAgIGBcbiAgICAgICAgKTtcbiAgICB9XG4gICAgdHJhdmVyc2VBbGxUZXh0Tm9kZXMoJGVsLCAkZm4pIHtcbiAgICAgICAgaWYgKCRlbC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICRlbC5jaGlsZE5vZGVzLmZvckVhY2goJGVsMiA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCRlbDIubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJGVsMi50ZXh0Q29udGVudCA9ICRmbigkZWwyLnRleHRDb250ZW50KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyYXZlcnNlQWxsVGV4dE5vZGVzKCRlbDIsICRmbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbG9hZCgpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWxhbmltYXRlLXNwbGl0XScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWxhbmltYXRlLXNwbGl0XScpLmZvckVhY2goJGVsID0+IHtcbiAgICAgICAgICAgICAgICAkZWwuc2V0QXR0cmlidXRlKCdkYXRhLWFyaWEtbGFiZWwnLCAkZWwuaW5uZXJUZXh0LnJlcGxhY2UoLyg/OlxcclxcbnxcXHJ8XFxuKS9nLCAnICcpKTtcbiAgICAgICAgICAgICAgICAkZWwuaW5uZXJIVE1MID0gJGVsLmlubmVySFRNTC5zcGxpdCgnICcpLmpvaW4oJyZuYnNwOycpO1xuICAgICAgICAgICAgICAgIGxldCBzaGlmdCA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKCRlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFuaW1hdGUtc3BsaXQnKSA9PT0gJ2NoYXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhdmVyc2VBbGxUZXh0Tm9kZXMoJGVsLCAkdGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyVzcGFuJScgKyAkdGV4dC5zcGxpdCgnJykuam9pbignJS9zcGFuJSVzcGFuJScpICsgJyUvc3BhbiUnO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgJGVsLmlubmVySFRNTCA9ICRlbC5pbm5lckhUTUwuc3BsaXQoJyVzcGFuJScpLmpvaW4oJzxzcGFuPicpLnNwbGl0KCclL3NwYW4lJykuam9pbignPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgICAgICBzaGlmdCA9IDEwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCRlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbGFuaW1hdGUtc3BsaXQnKSA9PT0gJ3dvcmQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJhdmVyc2VBbGxUZXh0Tm9kZXMoJGVsLCAkdGV4dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyVzcGFuJScgKyAkdGV4dC5zcGxpdCgnICcpLmpvaW4oJyUvc3BhbiUgJXNwYW4lJykgKyAnJS9zcGFuJSc7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkZWwuaW5uZXJIVE1MID0gJGVsLmlubmVySFRNTC5zcGxpdCgnJXNwYW4lJykuam9pbignPHNwYW4+Jykuc3BsaXQoJyUvc3BhbiUnKS5qb2luKCc8L3NwYW4+Jyk7XG4gICAgICAgICAgICAgICAgICAgIHNoaWZ0ID0gMjUwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoJGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1sYW5pbWF0ZS1zcGxpdCcpID09PSAnbGluZScpIHtcbiAgICAgICAgICAgICAgICAgICAgJGVsLmlubmVySFRNTCA9ICc8c3Bhbj4nICsgJGVsLmlubmVySFRNTC5zcGxpdCgnPGJyPicpLmpvaW4oJzwvc3Bhbj48YnIvPjxzcGFuPicpICsgJzwvc3Bhbj4nO1xuICAgICAgICAgICAgICAgICAgICBzaGlmdCA9IDUwMDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAkZWwucXVlcnlTZWxlY3RvckFsbCgnc3BhbicpLmZvckVhY2goKCRlbDIsIGkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRlbDIuaW5uZXJUZXh0LnRyaW0oKSA9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRlbDIuc2V0QXR0cmlidXRlKCdkYXRhLWxhbmltYXRlJywgJGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1sYW5pbWF0ZScpKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbGF5ID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbGFuaW1hdGUtZGVsYXknKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSBwYXJzZUludCgkZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWxhbmltYXRlLWRlbGF5JykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICgkZWwuaGFzQXR0cmlidXRlKCdkYXRhLWxhbmltYXRlLXNwZWVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbDIuc2V0QXR0cmlidXRlKCdkYXRhLWxhbmltYXRlLXNwZWVkJywgJGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1sYW5pbWF0ZS1zcGVlZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5ICo9IDEgLyBwYXJzZUludCgkZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWxhbmltYXRlLXNwZWVkJykpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRlbDIuc2V0QXR0cmlidXRlKCdkYXRhLWxhbmltYXRlLWRlbGF5JywgZGVsYXkgKyBzaGlmdCAqIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAkZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWxhbmltYXRlJyk7XG4gICAgICAgICAgICAgICAgJGVsLnJlbW92ZUF0dHJpYnV0ZSgnZGF0YS1sYW5pbWF0ZS1kZWxheScpO1xuICAgICAgICAgICAgICAgICRlbC5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtbGFuaW1hdGUtc3BlZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1sYW5pbWF0ZS1zcGVlZF0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1sYW5pbWF0ZS1zcGVlZF0nKS5mb3JFYWNoKCRlbCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHNwZWVkID0gcGFyc2VJbnQoJGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1sYW5pbWF0ZS1zcGVlZCcpKSAvIDEwMDA7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICRlbC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBzcGVlZCArICdzLCAnICsgc3BlZWQgKyAncyc7XG4gICAgICAgICAgICAgICAgfSwgMTApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWxhbmltYXRlXScpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWxhbmltYXRlXScpLmZvckVhY2goJGVsID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0KCRlbCk7XG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgkZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZG9jdW1lbnQuaGVhZC5pbnNlcnRBZGphY2VudEhUTUwoXG4gICAgICAgICAgICAnYmVmb3JlZW5kJyxcbiAgICAgICAgICAgIGBcbiAgICAgICAgICAgIDxzdHlsZT5cbiAgICAgICAgICAgICAgICBbZGF0YS1sYW5pbWF0ZT0nZmFkZSddIHtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGU9J3Njcm9sbFgnXSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgzMHB4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGU9J3Njcm9sbFknXSB7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMHB4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGU9J3NjYWxlJ10ge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSkgdHJhbnNsYXRlWSgzMHB4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGU9J3JvdGF0ZSddIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMTVkZWcpO1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAwIDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFtkYXRhLWxhbmltYXRlLXN0YXJ0ZWRdIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogb3BhY2l0eSAxcyBlYXNlLWluLW91dCwgdHJhbnNmb3JtIDFzIGVhc2UtaW4tb3V0O1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBbZGF0YS1sYW5pbWF0ZS1zcGxpdF0gc3BhbiB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6aW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBbZGF0YS1sYW5pbWF0ZT0nZmFkZSddW2RhdGEtbGFuaW1hdGUtc3RhcnRlZF0ge1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBbZGF0YS1sYW5pbWF0ZT0nc2Nyb2xsWCddW2RhdGEtbGFuaW1hdGUtc3RhcnRlZF0ge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVgoMHB4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGU9J3Njcm9sbFknXVtkYXRhLWxhbmltYXRlLXN0YXJ0ZWRdIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVYKDBweCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFtkYXRhLWxhbmltYXRlPSdzY2FsZSddW2RhdGEtbGFuaW1hdGUtc3RhcnRlZF0ge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEpIHRyYW5zbGF0ZVkoMHB4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgW2RhdGEtbGFuaW1hdGU9J3JvdGF0ZSddW2RhdGEtbGFuaW1hdGUtc3RhcnRlZF0ge1xuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgYFxuICAgICAgICApO1xuICAgIH1cbiAgICBzdGFydCgkZWwpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgISRlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbGFuaW1hdGUtc3RhcnRlZCcpICYmXG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvcCgpICsgd2luZG93LmlubmVySGVpZ2h0ID49IHRoaXMub2Zmc2V0VG9wKCRlbClcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBsZXQgZGVsYXkgPSAwO1xuICAgICAgICAgICAgaWYgKCRlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbGFuaW1hdGUtZGVsYXknKSkge1xuICAgICAgICAgICAgICAgIGRlbGF5ID0gcGFyc2VJbnQoJGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1sYW5pbWF0ZS1kZWxheScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICRlbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGFuaW1hdGUtc3RhcnRlZCcsICd0cnVlJyk7XG4gICAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2Nyb2xsVG9wKCkge1xuICAgICAgICBsZXQgZG9jID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgICByZXR1cm4gKHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2Muc2Nyb2xsVG9wKSAtIChkb2MuY2xpZW50VG9wIHx8IDApO1xuICAgIH1cbiAgICBvZmZzZXRUb3AoJGVsKSB7XG4gICAgICAgIHJldHVybiAkZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgd2luZG93LnBhZ2VZT2Zmc2V0IC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFRvcDtcbiAgICB9XG59XG5cbndpbmRvdy5sYW5pbWF0ZSA9IGxhbmltYXRlO1xuIiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY2xhc3NDYWxsQ2hlY2ssIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfY3JlYXRlQ2xhc3MsIG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlLCBtb2R1bGUuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBtb2R1bGUuZXhwb3J0czsiLCJmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikge1xuICByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDoge1xuICAgIFwiZGVmYXVsdFwiOiBvYmpcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0LCBtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZSwgbW9kdWxlLmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gbW9kdWxlLmV4cG9ydHM7Il19
